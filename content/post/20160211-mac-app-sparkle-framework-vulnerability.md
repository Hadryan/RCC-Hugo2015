---
title: The Mac App Sparkle Vulnerability
subtitle: ... which of my apps use it?
slug: mac-app-sparkle-framework-vulnerability
banner: /img/Cogley-Banner-Green-LEDs-1170x350-004-mono.jpg
date: 2016-02-11T20:12:00+09:00
publishdate: 2016-02-11T11:33:00+09:00
description: 'A post about how to find out what version your apps sparkle frameworks are using, by Rick Cogley'
draft: 'false'
images:
  - /img/sparkle-project-icon.png
  - /img/Cogley-Banner-Green-LEDs-1170x350-004-mono.jpg
  - 'http://static.cogley.info/img/rick-cogley-avatar-240x240.png'
tags:
  - sparkle
  - 1.13.1
  - security
  - mitm
  - vulnerability
  - mac
  - osx
topics:
  - Software
  - Tips
postsummary: Many Mac app developers use the Sparkle framework for updating their apps, but a recent security vulnerability discovery puts your OS X system at risk for older versions.
postsvg: icon-origami-butterfly
---

Many Mac app developers use the Sparkle framework for updating their apps, but a recent security vulnerability discovery puts your Mac at risk.
<!--more-->

## Apps using older Sparkle over http are vulnerable

Ars Technica posted a troubling  [article](http://arstechnica.com/security/2016/02/huge-number-of-mac-apps-vulnerable-to-hijacking-and-a-fix-is-elusive/) about the http man-in-the-middle security vulnerability that was discovered in the well-used Sparkle Framework. Here's the [original article](https://vulnsec.com/2016/osx-apps-vulnerabilities/) with lots of technical detail.

Sparkle updated their code immediately to patch, in [release 1.13.1](https://github.com/sparkle-project/Sparkle/releases/tag/1.13.1), but developers using the framework have to do the work to update to ``1.13.1``, and make sure all connections are done over https.

{{< figure1 link="/img/sparkle-project-icon.png" src="/img/sparkle-project-icon.png" type="Icon" title="The Sparkle Project" style="" >}}

### Which of my apps use which version of Sparkle?

There's a [big list](https://github.com/sparkle-project/Sparkle/issues/717) of apps that use Sparkle, but rest assured, if you're a Mac user, your apps are likely using it.

Ars technica user "ryanr" shows a Terminal command that can be used to list up what apps on your system are using Sparkle, and what version.

{{< prism bash command-line >}}find /Applications -path '*Autoupdate.app/Contents/Info.plist' -exec echo {} \; -exec grep -A1 CFBundleShortVersionString '{}' \; | grep -v CFBundleShortVersionString
{{< /prism >}}

However, if you use ``brew cask`` to install like I do, your apps are located in a different folder. To get _their_ information, just change the path to ``/opt/homebrew-cask/Caskroom`` like so:

{{< prism bash command-line >}}find /opt/homebrew-cask/Caskroom -path '*Autoupdate.app/Contents/Info.plist' -exec echo {} \; -exec grep -A1 CFBundleShortVersionString '{}' \; | grep -v CFBundleShortVersionString
{{< /prism >}}

... and so on, if you use different locations from the standard ``/Applications``.

### What you can do

Ars offers this advice:

> People who aren't sure if an app on their Mac is safe should consider avoiding unsecured Wi-Fi networks or using a virtual private network when doing so.

First, what you can do is keep after the developers of the apps you use, and keep your apps updated. Ping the developers on Twitter or via email.

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">hi <a href="https://twitter.com/acornapp">@acornapp</a> <a href="https://twitter.com/menial">@menial</a> <a href="https://twitter.com/bdkjones">@bdkjones</a> <a href="https://twitter.com/aptonic">@aptonic</a> <a href="https://twitter.com/kapeli">@kapeli</a> <a href="https://twitter.com/flowdock">@flowdock</a> <a href="https://twitter.com/kornelski">@kornelski</a>, is the sparkle framework security vulnerability fixed in your app?</p>&mdash; Rick Cogley (@RickCogley) <a href="https://twitter.com/RickCogley/status/697594060454887424">February 11, 2016</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

Having read a bunch of other posts, it appears this is _not_ just a Sparkle problem, critical though that is, but rather a fundamental bug in OS X itself. OS X sets Finder for {{<abbr FTP>}} and {{<abbr AFP>}} links, but Finder is where the vulnerability is.

So, here's what you can do from a practical perspective:

1. As just above, nag the devs of your apps to confirm they are set up to handle updates via Sparkle securely.
1. If you don't have _any_ {{<abbr FTP>}} client installed, install and run Firefox once, to get it to handle ``ftp://`` links. If you have an {{<abbr FTP>}} client like [Transmit](https://panic.com/transmit/) installed, go into its preferences and set it as the default {{<abbr FTP>}} hander.
1. If you have a Finder alternative like [Path Finder](http://www.cocoatech.com/pathfinder/), you can set it to handle {{<abbr FTP>}} and {{<abbr AFP>}}.
1. Confirm in System Preferences, Security & Privacy, General tab, that you have _"Allow apps downloaded from:"_ set to _"Mac App Store and Identified Developers"_ or stronger.

What didn't work:

1. I tried ``duti`` but it does not work, even if I compile it myself. Settings seem to "take" then are reverted quickly.
1. A System Preferences Panel app called "[RCDefaultApp](http://www.rubicode.com/Software/RCDefaultApp/)" that I used to use in older versions of OS X, no longer works in El Capitan version 10.11.
1. There's no easy, apparent way to use Apple's native ``lsregister`` to do these {{<abbr URL>}} handler settings.

### Encryption is Critical

Thinking about this incident, it really shows you how important good encryption is, and why it should be a standard. Generally speaking, boo to the US legislators pining to remove encryption.

## Updates

### 11 Feb 2016

1. Codekit, Noun Project and AirParrot responded that their apps are not vulnerable.
1. Peter Borg responded that Lingon is patched.
1. Ben Barnett at Menial says "In progress. Appcasts redirect to SSL-only, but app update needs to be released to fix properly."
1. 9labs say: "Yep, the latest AM (ed: that's AudioMate) and SC updates include a patched version of Sparkle and use https:// by default."

### 12 Feb 2016

Read in [another post](https://www.taoeffect.com/blog/2016/02/apologies-sky-kinda-falling-protecting-yourself-from-sparklegate/) that this problem is more than just Sparkle. Suggested solution to use ``duti`` does not work, so I summarized a few steps you can take, above. 
